<!DOCTYPE html>
<html>
<head>
    <title>Counter Button</title>
    <script>
        var count = 1; // Initialize the counter

        // Function to increment the counter
        function incrementCounter() {
            var counterElement = document.getElementById('counter');
            count++; // Increment the counter
            counterElement.innerText = count; // Update the counter display

            // Call function to update HTML file on GitHub
            updateHTMLFile();
        }

        // Function to update the HTML file on GitHub
        function updateHTMLFile() {
            // GitHub access token
            var Part1 = 'ghp_BYKwwOibUVFhn9O';
            var Part2 = 'hM7MHYeVQWdVc2C1GZnrO';
            var accessToken = Part1 + Part2;

            // GitHub repository details
            var repositoryOwner = 'ARCHIVE-llll';
            var repositoryName = 'llll';
            var filePath = 'index.html';

            // New HTML content with updated counter
            var newContent = '<!DOCTYPE html><html><head><title>Counter Button</title></head><body><h1>Counter Button</h1><p>Count: <span id="counter">' + count + '</span></p><button onclick="incrementCounter()">Increment</button></body></html>';

            // GitHub API URL to fetch file details
            var apiUrl = 'https://api.github.com/repos/' + repositoryOwner + '/' + repositoryName + '/contents/' + filePath;

            console.log('Updating HTML file...'); // Log updating process
            console.log('API URL:', apiUrl); // Log API URL

            // Fetch file details from GitHub
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const sha = data.sha; // Get SHA hash of the existing file
                    // Send PUT request to update file content
                    fetch(apiUrl, {
                        method: 'PUT',
                        headers: {
                            'Authorization': 'token ' + accessToken,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            "message": "Update index.html",
                            "content": btoa(newContent), // Encode new content to base64
                            "sha": sha // Provide SHA hash in request body
                        })
                    })
                    .then(response => {
                        console.log('Response:', response); // Log response from GitHub
                        if (response.ok) {
                            console.log('HTML file updated successfully.'); // Log success message
                        } else {
                            console.error('Failed to update HTML file:', response.statusText); // Log error if update fails
                        }
                    })
                    .catch(error => {
                        console.error('Error updating HTML file:', error); // Log error if request fails
                    });
                })
                .catch(error => {
                    console.error('Error fetching file details:', error); // Log error if fetching file details fails
                });
        }
    </script>
</head>
<body>
    <h1>Counter Button</h1>
    <p>Count: <span id="counter">1</span></p>
    <button onclick="incrementCounter()">Increment</button>
</body>
</html>
