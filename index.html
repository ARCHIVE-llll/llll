<!DOCTYPE html>
<html>
<head>
    <title>Counter Buttonllll</title>
    <script>
        var count = 1;

        function incrementCounter() {
            var counterElement = document.getElementById('counter');
            count++;
            counterElement.innerText = count;

            updateCounterOnGitHub(count);
        }

        function updateCounterOnGitHub(newCount) {
            var Part1 = 'ghp_BYKwwOibUVFhn9O';
            var Part2 = 'hM7MHYeVQWdVc2C1GZnrO';
            var accessToken = Part1 + Part2;

            var repositoryOwner = 'ARCHIVE-llll';
            var repositoryName = 'llll';
            var filePath = 'index.html';

            var apiUrl = `https://api.github.com/repos/${repositoryOwner}/${repositoryName}/contents/${filePath}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const sha = data.sha;

                    var updatedContent = data.content;
                    updatedContent = atob(updatedContent);
                    updatedContent = updatedContent.replace('</title>', 'l</title>');

                    updatedContent = updatedContent.replace('<span id="counter">' + (count - 1) + '</span>', '<span id="counter">' + newCount + '</span>');

                    fetch(apiUrl, {
                        method: 'PUT',
                        headers: {
                            'Authorization': 'token ' + accessToken,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            "message": "Update counter in index.html",
                            "content": btoa(updatedContent),
                            "sha": sha
                        })
                    })
                    .then(response => {
                        if (response.ok) {
                            console.log('Counter updated successfully on GitHub.');
                        } else {
                            console.error('Failed to update counter on GitHub:', response.statusText);
                        }
                    })
                    .catch(error => {
                        console.error('Error updating counter on GitHub:', error);
                    });
                })
                .catch(error => {
                    console.error('Error fetching file details:', error);
                });
        }
    </script>
</head>
<body>
    <h1>Counter Button</h1>
    <p>Count: <span id="counter">3</span></p>
    <button onclick="incrementCounter()">Increment</button>
</body>
</html>
