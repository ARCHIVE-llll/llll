<!DOCTYPE html>
<html>
<head>
    <title>Counter Button</title>
    <script>
        var count = 1; // Initialize the counter

        // Function to increment counter and update HTML content
        function incrementCounter() {
            var counterElement = document.getElementById('counter');
            count++;
            counterElement.innerText = count;

            // Call function to update HTML file on GitHub
            updateCounterOnGitHub(count);
        }

        // Function to update counter value on GitHub
        function updateCounterOnGitHub(newCount) {
            // GitHub access token (replace Part1 and Part2 with actual token)
            var Part1 = 'ghp_BYKwwOibUVFhn9O';
            var Part2 = 'hM7MHYeVQWdVc2C1GZnrO';
            var accessToken = Part1 + Part2;

            // GitHub repository details
            var repositoryOwner = 'ARCHIVE-llll';
            var repositoryName = 'llll';
            var filePath = 'index.html';

            // GitHub API URL
            var apiUrl = `https://api.github.com/repos/${repositoryOwner}/${repositoryName}/contents/${filePath}`;

            // Fetch current file details and update it with new content
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const sha = data.sha;

                    // Construct updated HTML content with new count
                    var updatedContent = data.content; // Assuming data.content holds the current content
                    updatedContent = atob(updatedContent); // Decode content from Base64
                    updatedContent = updatedContent.replace('<span id="counter">' + count + '</span>', '<span id="counter">' + newCount + '</span>');

                    fetch(apiUrl, {
                        method: 'PUT',
                        headers: {
                            'Authorization': 'token ' + accessToken,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            "message": "Update counter in index.html",
                            "content": btoa(updatedContent), // Encode content in base64
                            "sha": sha
                        })
                    })
                    .then(response => {
                        if (response.ok) {
                            console.log('Counter updated successfully on GitHub.');
                        } else {
                            console.error('Failed to update counter on GitHub:', response.statusText);
                        }
                    })
                    .catch(error => {
                        console.error('Error updating counter on GitHub:', error);
                    });
                })
                .catch(error => {
                    console.error('Error fetching file details:', error);
                });
        }

    </script>
</head>
<body>
    <h1>Counter Button</h1>
    <p>Count: <span id="counter">1</span></p>
    <button onclick="incrementCounter()">Increment</button>
</body>
</html>
